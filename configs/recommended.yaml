# configs/recommended.yaml
# This file defines all configuration settings for training and evaluating the ViroporinAFMini model.
# It includes model size, data paths, optimizer and training parameters, loss weights, and priors.
# Used by train.py and eval.py to load consistent experiment settings (recommended model setup).

seed: 123
device: cuda

model:
  feat_dim: 1280
  d_single: 256
  d_pair: 128
  heads:
    distogram_bins: 96
  evoformer:
    n_blocks: 12
    n_attn_heads: 4
  ipa:
    n_blocks: 4
    n_points: 4
    dropout: 0.1

data:
  train_index: data/train.jsonl
  val_index: data/test.jsonl
  batch_size: 2
  shuffle: true
  num_workers: 4
  max_len: 192

train:
  steps: 40000
  lr: 1.0e-4
  weight_decay: 0.01
  warmup_steps: 0
  gate_min_step: 0
  gate_dist_thresh: 0         
  gate_fape_thresh: 0
  grad_clip: 1.0
  amp_enabled: true     
  amp_on_step: 1000
  detect_anomaly: false    
  eval_every: 1000
  log_every: 100
  ckpt_dir: checkpoints
  log_dir: checkpoints/logs
  ema_alpha: 0.1
  priors_warmup_steps: 2000
  grad_accum_steps: 4
  val_log_dir: checkpoints/logs
  early_stop_patience: 10

optimizer:
  name: adamw
  betas: [0.9, 0.95]
  eps: 1.0e-8
  weight_decay: 0.01

loss_weights:
  distogram: 1.0
  torsion: 0.1
  fape: 0.5
  priors: 0.5
  membrane: 0.05
  interface: 0.05
  pore: 0.05

priors:
  z_half_thickness: 4.0
  mem_inband_pull: 0.05
  use_cn: true
  n_copies: 4
  ring_radius: 7.0
  tm_span: [0.3, 0.7]
  pore_target_A: 3.5
  cap_A: 6.0
